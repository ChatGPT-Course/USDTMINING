<!DOCTYPE html>
<html>
<head>
    <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #content {
            display: none;
        }
        #not-subscribed {
            margin-top: 30px;
        }
        button {
            background-color: #0088cc;
            color: white;
            border: none;
            padding: 10px 20px;
            margin-top: 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #006699;
        }
        a {
            color: #0088cc;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="content">
        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, –ø–æ–¥–ø–∏—Å—á–∏–∫! üéâ</h1>
        <p>–ö–æ–Ω—Ç–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º.</p>
    </div>
    <div id="not-subscribed">
        <h1>üîí –î–æ—Å—Ç—É–ø –∑–∞–∫—Ä—ã—Ç</h1>
        <p>–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å:</p>
        <a href="https://t.me/testfuweifw" target="_blank">–ü–µ—Ä–µ–π—Ç–∏ –≤ Telegram-–∫–∞–Ω–∞–ª</a>
        <button onclick="checkSubscription()">–Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è</button>
    </div>

    <script>
        const botToken = '7459995995:AAGW_P0rmbXKhSqiLdCB52DX6CFr5mbGHc0';
        const channelName = '@testfuweifw';  // –í–∞—à –∫–∞–Ω–∞–ª
        
        // –ü–æ–ª—É—á–∞–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram WebApp
        let userId = null;
        if (window.Telegram && Telegram.WebApp && Telegram.WebApp.initDataUnsafe && Telegram.WebApp.initDataUnsafe.user) {
            userId = Telegram.WebApp.initDataUnsafe.user.id;
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏
        async function checkSubscription() {
            if (!userId) {
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–∞—à Telegram ID. –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ—Ç —Å–∞–π—Ç —á–µ—Ä–µ–∑ Telegram.');
                return;
            }

            try {
                const response = await fetch(`https://api.telegram.org/bot${botToken}/getChatMember?chat_id=${channelName}&user_id=${userId}`);
                const data = await response.json();
                
                if (data.ok && (data.result.status === 'member' || data.result.status === 'administrator' || data.result.status === 'creator')) {
                    document.getElementById('content').style.display = 'block';
                    document.getElementById('not-subscribed').style.display = 'none';
                    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
                    Telegram.WebApp.expand(); // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º WebApp –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
                } else {
                    alert('–í—ã –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ –∫–∞–Ω–∞–ª! –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Å–Ω–æ–≤–∞.');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏:', error);
                alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–æ–¥–ø–∏—Å–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ, –µ—Å–ª–∏ –µ—Å—Ç—å userId
        if (userId) {
            checkSubscription();
        }
    </script>
</body>
</html>
